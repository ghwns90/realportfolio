# 1. í™˜ê²½ ì„¤ì •
FROM node:20-alpine
WORKDIR /app

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
COPY package*.json ./
COPY tsconfig.json ./
COPY prisma ./prisma/
RUN npm install

# 3. ì†ŒìŠ¤ ë³µì‚¬ ë° 'ë¹Œë“œ' (ê°€ì¥ ì¤‘ìš”!)
COPY . .
RUN npx prisma generate
RUN npm run build  
# ğŸ’¡ tscë¥¼ ì‹¤í–‰í•´ì„œ src(.ts)ë¥¼ dist(.js)ë¡œ ë°”ê¿‰ë‹ˆë‹¤.

# 4. ì‹¤í–‰ (devê°€ ì•„ë‹Œ start!)
ENV NODE_ENV=production
CMD ["npm", "run", "start"]